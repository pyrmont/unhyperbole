%html
  %head
    %title= "Karaoke"
    %link{:rel => "stylesheet", :type => "text/css", :href => "/hisaishi-style.css?1"}
    %script{:type => "text/javascript",:src  => "/jquery-1.6.2.min.js"}
    %script{:type => "text/javascript",:src  => "/mediaelement-and-player.min.js"}
    %script{:type => "text/javascript",:src  => "/HisaishiEngine.js"}    
    %script{:type => "text/javascript",:src  => "/effects.js"}
    %script{:type => "text/javascript",:src  => "/html5slider.js"}
    :javascript
      var trax = #{song_json};
      var hl = null;
      $(document).ready(function(){
        hl = new HisaishiList({
          tracks: trax,
          hsParams: {
            preroll: {
              line: 1000,
              word: 200
            }
          },
          containers: {
            display: '#hisaishi-display',
            list:  '#hisaishi-list'
          }
        });
        // prepControls();
        hideCursor();
        setTimeout(function() {
          $('.play-button').trigger('mousedown');
        }, 2000);
      });   
  %body
    #hisaishi-display
    %ol{:id => "hisaishi-list"}
    #main-controls
      %a{:href => '/logout', :title => "Log out"}= "Log out"